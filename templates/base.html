<!DOCTYPE html>
<html lang="en" class="light">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
            {% block title %}
                {{ title }} | KortekStream
            {% endblock title %}
        </title>

        <!-- Performance Optimizations -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">

        <!-- Tailwind CSS CDN -->
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                darkMode: 'class',
                theme: {
                    extend: {
                        colors: {
                            // Enhanced Color Palette
                            gold: {
                                50: '#FFFBEB',
                                100: '#FEF3C7',
                                200: '#FDE68A',
                                300: '#FCD34D',
                                400: '#FBBF24',
                                500: '#F59E0B', // Primary gold
                                600: '#D97706',
                                700: '#B45309',
                                800: '#92400E',
                                900: '#78350F',
                            },
                            // Netflix-inspired Dark Theme
                            korteks: {
                                red: '#E50914',
                                darkred: '#B81D24',
                                black: '#0F0F0F',
                                darkgray: '#1A1A1A',
                                gray: '#262626',
                                lightgray: '#404040'
                            },
                            // Modern Accent Colors
                            accent: {
                                purple: '#8B5CF6',
                                blue: '#3B82F6',
                                emerald: '#10B981',
                                orange: '#F97316'
                            }
                        },
                        fontFamily: {
                            sans: ['Poppins', 'Inter', 'system-ui', 'sans-serif'],
                            display: ['Poppins', 'sans-serif'],
                        },
                        fontSize: {
                            'xs': ['0.75rem', { lineHeight: '1rem' }],
                            'sm': ['0.875rem', { lineHeight: '1.25rem' }],
                            'base': ['1rem', { lineHeight: '1.5rem' }],
                            'lg': ['1.125rem', { lineHeight: '1.75rem' }],
                            'xl': ['1.25rem', { lineHeight: '1.75rem' }],
                            '2xl': ['1.5rem', { lineHeight: '2rem' }],
                            '3xl': ['1.875rem', { lineHeight: '2.25rem' }],
                            '4xl': ['2.25rem', { lineHeight: '2.5rem' }],
                            '5xl': ['3rem', { lineHeight: '1' }],
                            '6xl': ['3.75rem', { lineHeight: '1' }],
                            '7xl': ['4.5rem', { lineHeight: '1' }],
                        },
                        boxShadow: {
                            'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                            'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                            'hard': '0 10px 40px -10px rgba(0, 0, 0, 0.25)',
                            'gold': '0 4px 14px 0 rgba(245, 158, 11, 0.25)',
                            'gold-lg': '0 10px 25px -5px rgba(245, 158, 11, 0.35)',
                            'red': '0 4px 14px 0 rgba(229, 9, 20, 0.25)',
                            'red-lg': '0 10px 25px -5px rgba(229, 9, 20, 0.35)',
                            'glow': '0 0 20px rgba(245, 158, 11, 0.4)',
                            'glow-red': '0 0 20px rgba(229, 9, 20, 0.4)',
                        },
                        backdropBlur: {
                            'xs': '2px',
                            'sm': '4px',
                            'md': '8px',
                            'lg': '16px',
                            'xl': '24px',
                            '2xl': '40px',
                            '3xl': '64px',
                        },
                        animation: {
                            'fade-in': 'fadeIn 0.6s ease-out',
                            'slide-up': 'slideUp 0.6s ease-out',
                            'slide-down': 'slideDown 0.6s ease-out',
                            'scale-in': 'scaleIn 0.6s ease-out',
                            'float': 'float 6s ease-in-out infinite',
                            'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
                            'shimmer': 'shimmer 2s infinite',
                        },
                        keyframes: {
                            fadeIn: {
                                '0%': { opacity: '0' },
                                '100%': { opacity: '1' },
                            },
                            slideUp: {
                                '0%': { opacity: '0', transform: 'translateY(20px)' },
                                '100%': { opacity: '1', transform: 'translateY(0)' },
                            },
                            slideDown: {
                                '0%': { opacity: '0', transform: 'translateY(-20px)' },
                                '100%': { opacity: '1', transform: 'translateY(0)' },
                            },
                            scaleIn: {
                                '0%': { opacity: '0', transform: 'scale(0.95)' },
                                '100%': { opacity: '1', transform: 'scale(1)' },
                            },
                            float: {
                                '0%, 100%': { transform: 'translateY(0px)' },
                                '50%': { transform: 'translateY(-20px)' },
                            },
                            pulseGlow: {
                                '0%, 100%': { boxShadow: '0 0 5px rgba(245, 158, 11, 0.4)' },
                                '50%': { boxShadow: '0 0 20px rgba(245, 158, 11, 0.8)' },
                            },
                            shimmer: {
                                '0%': { backgroundPosition: '-200% 0' },
                                '100%': { backgroundPosition: '200% 0' },
                            },
                        },
                    }
                }
            }
        </script>

        <!-- Modern CSS Framework -->
        {% load static %}
        <!-- <link rel="stylesheet" href="{% static 'css/modern-animations.css' %}"> -->

        <style>
            /* Enhanced Base Styles */
            * {
                box-sizing: border-box;
            }

            body {
                font-family: 'Poppins', 'Inter', system-ui, -apple-system, sans-serif;
                line-height: 1.6;
                scroll-behavior: smooth;
            }

            /* Modern Glass Morphism Background */
            .gradient-bg {
                background: linear-gradient(135deg,
                    rgba(255, 255, 255, 0.1) 0%,
                    rgba(255, 255, 255, 0.05) 100%);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .dark .gradient-bg {
                background: linear-gradient(135deg,
                    rgba(20, 20, 20, 0.9) 0%,
                    rgba(38, 38, 38, 0.8) 100%);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.05);
            }

            /* Enhanced Text Clamp */
            .line-clamp-1 {
                display: -webkit-box;
                -webkit-line-clamp: 1;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .line-clamp-2 {
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .line-clamp-3 {
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            /* Modern Card Hover Effects */
            .card-hover {
                transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                border: 1px solid transparent;
                position: relative;
                overflow: hidden;
            }

            .card-hover::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    90deg,
                    transparent,
                    rgba(255, 255, 255, 0.1),
                    transparent
                );
                transition: left 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
                z-index: 1;
            }

            .card-hover:hover::before {
                left: 100%;
            }

            .light .card-hover:hover {
                transform: translateY(-12px) scale(1.02);
                border-color: rgba(245, 158, 11, 0.3);
                box-shadow:
                    0 25px 50px -12px rgba(0, 0, 0, 0.15),
                    0 0 30px rgba(245, 158, 11, 0.2);
            }

            .dark .card-hover:hover {
                transform: translateY(-12px) scale(1.02);
                border-color: rgba(229, 9, 20, 0.3);
                box-shadow:
                    0 25px 50px -12px rgba(0, 0, 0, 0.4),
                    0 0 30px rgba(229, 9, 20, 0.2);
            }

            /* Enhanced Scrollbar */
            .custom-scrollbar::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }

            .light .custom-scrollbar::-webkit-scrollbar-track {
                background: rgba(0, 0, 0, 0.05);
                border-radius: 12px;
            }

            .light .custom-scrollbar::-webkit-scrollbar-thumb {
                background: linear-gradient(180deg, #F59E0B, #D97706);
                border-radius: 12px;
                border: 2px solid transparent;
                background-clip: content-box;
            }

            .light .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(180deg, #D97706, #B45309);
            }

            .dark .custom-scrollbar::-webkit-scrollbar-track {
                background: rgba(255, 255, 255, 0.05);
                border-radius: 12px;
            }

            .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                background: linear-gradient(180deg, #E50914, #B81D24);
                border-radius: 12px;
                border: 2px solid transparent;
                background-clip: content-box;
            }

            .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(180deg, #B81D24, #831018);
            }

            /* Loading States */
            .loading-skeleton {
                background: linear-gradient(
                    90deg,
                    #f0f0f0 25%,
                    #e0e0e0 50%,
                    #f0f0f0 75%
                );
                background-size: 200% 100%;
                animation: shimmer 2s infinite;
            }

            .dark .loading-skeleton {
                background: linear-gradient(
                    90deg,
                    #2a2a2a 25%,
                    #1a1a1a 50%,
                    #2a2a2a 75%
                );
                background-size: 200% 100%;
            }

            /* Page Transition */
            .page-transition {
                opacity: 0;
                transform: translateY(20px);
                animation: slideUp 0.6s ease-out forwards;
                animation-delay: 0.1s;
            }

            /* Focus States */
            .focus-ring {
                transition: all 0.2s ease;
            }

            .focus-ring:focus {
                outline: none;
                ring: 2px;
                ring-color: rgba(245, 158, 11, 0.5);
                ring-offset: 2px;
            }

            .dark .focus-ring:focus {
                ring-color: rgba(229, 9, 20, 0.5);
            }
        </style>

        {% block extra_css %}
        {% endblock extra_css %}
        {% block extra_head %}
        {% endblock extra_head %}
    </head>
    <body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
        <!-- Enhanced Theme Toggle Button -->
        <div class="fixed top-6 right-6 z-50">
            <button id="theme-toggle" class="group relative p-3 rounded-full bg-white/80 dark:bg-korteks-gray/80 backdrop-blur-md border border-gray-200/50 dark:border-gray-700/50 text-gray-700 dark:text-gray-300 hover:bg-white dark:hover:bg-korteks-darkgray shadow-lg hover:shadow-xl transition-all duration-300 ease-out hover:scale-110">
                <!-- Enhanced Sun icon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden dark:block transition-all duration-300 group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <!-- Enhanced Moon icon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 block dark:hidden transition-all duration-300 group-hover:-rotate-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
                <!-- Tooltip -->
                <div class="absolute -bottom-12 right-0 bg-gray-900 dark:bg-white text-white dark:text-gray-900 px-3 py-1 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 pointer-events-none whitespace-nowrap">
                    Switch Theme
                    <div class="absolute -top-1 right-4 w-2 h-2 bg-gray-900 dark:bg-white transform rotate-45"></div>
                </div>
            </button>
        </div>

        <!-- Enhanced Background Pattern -->
        <div class="fixed inset-0 -z-10 overflow-hidden">
            <!-- Animated background shapes -->
            <div class="absolute -top-40 -right-32 w-80 h-80 bg-gradient-to-br from-gold-200/20 to-gold-400/10 dark:from-korteks-red/10 dark:to-korteks-darkred/5 rounded-full blur-3xl animate-float"></div>
            <div class="absolute -bottom-40 -left-32 w-96 h-96 bg-gradient-to-tr from-gold-300/15 to-gold-500/5 dark:from-korteks-red/5 dark:to-korteks-darkred/10 rounded-full blur-3xl animate-float" style="animation-delay: -3s;"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-gold-100/10 via-transparent to-gold-200/10 dark:from-korteks-red/5 dark:via-transparent dark:to-korteks-darkred/5 rounded-full blur-3xl animate-pulse opacity-50"></div>
        </div>
        
        {% block content %}
        {% endblock content %}
        
        <!-- Enhanced Theme Toggle Script -->
        <script>
            // Enhanced theme management with animations
            const initTheme = () => {
                // Check for saved theme preference or use system preference
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            };

            // Initialize theme immediately
            initTheme();

            // Enhanced theme toggle with smooth transitions
            document.addEventListener('DOMContentLoaded', function() {
                const themeToggle = document.getElementById('theme-toggle');

                if (themeToggle) {
                    themeToggle.addEventListener('click', function(e) {
                        e.preventDefault();

                        // Add loading state
                        this.style.pointerEvents = 'none';
                        this.style.transform = 'scale(0.95)';

                        // Theme transition with animation
                        document.documentElement.style.transition = 'all 0.3s ease-in-out';

                        setTimeout(() => {
                            if (document.documentElement.classList.contains('dark')) {
                                document.documentElement.classList.remove('dark');
                                localStorage.theme = 'light';
                            } else {
                                document.documentElement.classList.add('dark');
                                localStorage.theme = 'dark';
                            }

                            // Reset button state
                            this.style.pointerEvents = '';
                            this.style.transform = '';

                            // Remove transition after theme change
                            setTimeout(() => {
                                document.documentElement.style.transition = '';
                            }, 300);
                        }, 50);
                    });
                }
            });

            // Page load animation
            window.addEventListener('load', function() {
                document.body.classList.add('loaded');

                // Animate elements with stagger
                const animateElements = document.querySelectorAll('.stagger-item');
                animateElements.forEach((el, index) => {
                    el.style.animationDelay = `${index * 0.1}s`;
                });
            });

            // Smooth scroll behavior
            document.addEventListener('DOMContentLoaded', function() {
                const links = document.querySelectorAll('a[href^="#"]');
                links.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            });

            // Performance optimization
            const optimizeScroll = () => {
                let ticking = false;

                const updateScrollEffects = () => {
                    const scrollY = window.scrollY;
                    const cards = document.querySelectorAll('.modern-card');

                    cards.forEach((card, index) => {
                        const rect = card.getBoundingClientRect();
                        const isVisible = rect.top < window.innerHeight && rect.bottom > 0;

                        if (isVisible && !card.classList.contains('animated')) {
                            card.classList.add('animated');
                            card.style.animationDelay = `${index * 0.1}s`;
                        }
                    });

                    ticking = false;
                };

                window.addEventListener('scroll', () => {
                    if (!ticking) {
                        requestAnimationFrame(updateScrollEffects);
                        ticking = true;
                    }
                });
            };

            // Initialize scroll optimization
            document.addEventListener('DOMContentLoaded', optimizeScroll);
        </script>
        
        {% block extra_js %}
        {% endblock extra_js %}
    </body>
</html>
